<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
  <title>Quick Hybrid API</title>
  <link rel="stylesheet" href="../common/mui/mui.css" />
  <link rel="stylesheet" href="../common/common.css" />
  <style>
    .pt0 {
      margin-top: 1em;
    }

    .mui-system .mui-input-row {
      height: auto !important;
      word-wrap: break-word !important;
    }

    .mui-dms .mui-input-row label {
      width: 30%;
    }

    .mui-dms .mui-input-row label~input {
      width: 70%;
    }
  </style>
</head>

<body>
  <div class="mui-content pt0">
    <div class="mui-card">
      <div class="mui-card-header">
        <button type="button" class="mui-btn mui-btn-primary" onclick="getSystemStorage()">获取系统存储信息</button>
	<button type="button" class="mui-btn mui-btn-primary" onclick="getStorageInfo()">获取存储信息</button>
      </div>
    </div>

    <div class="mui-card-content mui-dms">

      <div class="mui-card">
        <div class="mui-input-row">
          <label for="SystemRoot">只读分区</label>
          <input type="text" id="SystemRoot" pattern="value" value="" readonly="readonly"  class="mui-input-clear" />
        </div>
      </div>

      <div class="mui-card">
        <div class="mui-input-row">
          <label for="SystemData">数据区</label>
          <input type="text" id="SystemData" pattern="value" value="" readonly="readonly"  class="mui-input-clear" />
        </div>
      </div>

      <div class="mui-card">
        <div class="mui-input-row">
          <label for="IntStorage">内置存储卡</label>
          <input type="text" id="IntStorage" pattern="value" value="" readonly="readonly"  class="mui-input-clear" />
        </div>
      </div>

      <div class="mui-card">
        <div class="mui-input-row">
          <label for="ExtStorage">外置存储卡</label>
          <input type="text" id="ExtStorage" pattern="value" value="" readonly="readonly" class="mui-input-clear" />
        </div>
      </div>

     <div class="mui-card">
        <div class="mui-input-row">
          <label for="Memory">内存</label>
          <input type="text" id="Memory" pattern="value" value="" readonly="readonly" class="mui-input-clear" />
        </div>
      </div>


           

      <div class="mui-card-footer">
        <div id="start-progressbar" class="mui-progressbar">
          <span></span>
        </div>
      </div>

    </div>

  </div>



  <script type="text/javascript" src="../common/mui/mui.js"></script>
  <script type="text/javascript" src="../lib/syberh.min.js"></script>
  <script type="text/javascript" src="../common/common.js"></script>
  <script type="text/javascript" src="../lib/vconsole.min.js"></script>
  <script type="text/javascript" src="../lib/StorageSpace.plugin.js"></script>

  <script>
    var vConsole = new VConsole()

    syberh.register(StorageSpacePlugin)

    function getSystemStorage(param) {
      syberh.StorageSpace.getSystemStorage({
        success: function (result) {
          console.info("result-获取系统存储信息: " + result)
          document.getElementById("SystemRoot").value = blankHandle(result.SystemRoot);
          document.getElementById("SystemData").value = blankHandle(result.SystemData);
	  document.getElementById("IntStorage").value = blankHandle(result.IntStorage);
	  document.getElementById("ExtStorage").value = blankHandle(result.ExtStorage);
	  document.getElementById("Memory").value = blankHandle(result.Memory);


        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });
    }

    function getStorageInfo(param) {
      syberh.StorageSpace.getSystemRoot({
        success: function (result) {
          console.info("result-获取存储信息: " + result)
          document.getElementById("SystemRoot").value = blankHandle(result.free) + "," + blankHandle(result.total);
        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });

     syberh.StorageSpace.getSystemData({
        success: function (result) {
          console.info("result-获取存储信息: " + result)
          document.getElementById("SystemData").value = blankHandle(result.free) + "," + blankHandle(result.total);
        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });

	syberh.StorageSpace.getIntStorage({
        success: function (result) {
          console.info("result-获取存储信息: " + result)
          document.getElementById("IntStorage").value = blankHandle(result.free) + "," + blankHandle(result.total);
        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });

	syberh.StorageSpace.getExtStorage({
        success: function (result) {
          console.info("result-获取存储信息: " + result)
          document.getElementById("ExtStorage").value = blankHandle(result.free) + "," + blankHandle(result.total);
        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });

	syberh.StorageSpace.getMemory({
        success: function (result) {
          console.info("result-获取存储信息: " + result)
          document.getElementById("Memory").value = blankHandle(result.free) + "," + blankHandle(result.total);
        },
        fail: function (error) {
          console.info(error)
          alert(error.msg);
        }
      });


    }
      
    function blankHandle(param) {
      if (typeof param === "string") {
        return !param ? '' : param;
      }
      return param;
    }

  </script>
</body>

</html>
